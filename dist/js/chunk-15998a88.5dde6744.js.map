{"version":3,"sources":["webpack:///./src/models/index.ts","webpack:///./src/composables/useLoader/useLoader.ts","webpack:///./src/views/LoginPage/LoginPage.vue?d82d","webpack:///./src/views/LoginPage/components/LoginForm.vue?e612","webpack:///./src/views/LoginPage/components/LoginForm.vue","webpack:///./src/views/LoginPage/components/LoginForm.vue?33f0","webpack:///./src/views/LoginPage/components/LoginForm.vue?bff1","webpack:///./src/views/LoginPage/LoginPage.vue","webpack:///./src/views/LoginPage/LoginPage.vue?0399","webpack:///./src/views/LoginPage/LoginPage.vue?4453","webpack:///./src/composables/useValidation/useValidation.ts"],"names":["config","loading","initial","withLoader","callback","value","Promise","resolve","setTimeout","result","delay","render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","name","routeNames","auth","register","staticRenderFns","model","$$v","valid","expression","errors","email","formData","$set","isPasswordVisible","icons","mdiEyeOffOutline","mdiEyeOutline","password","on","$event","forgot","login","components","BaseButton","setup","mapErrors","useLoader","useRouter","router","catch","user","useAuthStore","storeLogin","data","member","push","dashboard","profile","billing","mdi","component","VForm","VTextField","LoginForm","MemberPage","buildObject","obj","Object","entries","key","resetErrors","error","response","status","Error","message"],"mappings":"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","file":"js/chunk-15998a88.5dde6744.js","sourcesContent":["export * from './User';\n","import { ref } from '@/plugins/composition';\n\ntype UseLoaderConfig = { delay?: number; initial?: boolean };\n\nexport const useLoader = (config?: UseLoaderConfig) => {\n  const loading = ref(config?.initial ?? false);\n\n  const withLoader = async (callback: () => unknown) => {\n    loading.value = true;\n\n    return new Promise((resolve) => {\n      setTimeout(async () => {\n        let result;\n\n        try {\n          result = await callback();\n        } catch (e) {\n          loading.value = false;\n        }\n\n        loading.value = false;\n        resolve(result);\n      }, config?.delay ?? 0);\n    });\n  };\n\n  return { loading, withLoader };\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('member-page',{attrs:{\"title\":\"Your Artist Pass\",\"heading\":\"Artist Pass Login\"}},[_c('div',{staticClass:\"mb-4\"},[_c('div',[_vm._v(\"An Artist Pass is required to book a space with Brand X.\")]),_c('div',[_vm._v(\"Don't have one? \"),_c('router-link',{attrs:{\"to\":{ name: _vm.routeNames.auth.register }}},[_vm._v(\" Subscribe here\")])],1)]),_c('div',[_c('login-form')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-form',{model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"label\":\"Email Address\",\"error-messages\":_vm.errors.email},model:{value:(_vm.formData.email),callback:function ($$v) {_vm.$set(_vm.formData, \"email\", $$v)},expression:\"formData.email\"}}),_c('v-text-field',{attrs:{\"dense\":\"\",\"outlined\":\"\",\"type\":_vm.isPasswordVisible ? 'text' : 'password',\"label\":\"Password\",\"append-icon\":_vm.isPasswordVisible ? _vm.icons.mdiEyeOffOutline : _vm.icons.mdiEyeOutline,\"error-messages\":_vm.errors.password,\"hide-details\":\"auto\"},on:{\"click:append\":function($event){_vm.isPasswordVisible = !_vm.isPasswordVisible}},model:{value:(_vm.formData.password),callback:function ($$v) {_vm.$set(_vm.formData, \"password\", $$v)},expression:\"formData.password\"}}),_c('div',{staticClass:\"text-right\"},[_c('router-link',{attrs:{\"to\":{ name: _vm.routeNames.auth.forgot }}},[_vm._v(\"Forgot Password\")])],1),_c('div',{staticClass:\"d-flex justify-center\"},[_c('base-button',{staticClass:\"my-4\",attrs:{\"black\":\"\",\"loading\":_vm.loading},on:{\"click\":_vm.login}},[_vm._v(\"Login\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent, reactive, ref } from '@/plugins/composition';\nimport { useFormValidation } from '@/composables/useValidation';\nimport { mdiEyeOffOutline, mdiEyeOutline } from '@mdi/js';\nimport BaseButton from '@/components/base/BaseButton.vue';\nimport { useLoader } from '@/composables/useLoader';\nimport { User } from '@/models';\nimport { useAuthStore } from '@/composables/useAuthStore';\nimport { useRouter } from '@/router/useRouter';\nimport { routeNames } from '@/router/routeNames';\n\nexport default defineComponent({\n  name: 'LoginForm',\n  components: {\n    BaseButton,\n  },\n  setup() {\n    const valid = ref(false);\n    const isPasswordVisible = ref(false);\n    const formData = reactive({\n      email: '',\n      password: '',\n    });\n\n    const { errors, mapErrors } = useFormValidation(formData); // TODO - validation errors\n    const { loading, withLoader } = useLoader();\n    const { router } = useRouter();\n\n    const login = async () =>\n      withLoader(async () => {\n        const user = await User.login({ email: formData.email, password: formData.password }).catch((errors) =>\n          mapErrors(errors)\n        );\n\n        if (user) {\n          const { storeLogin } = useAuthStore();\n\n          storeLogin(user);\n\n          if (user.data.member) {\n            router.push({ name: routeNames.dashboard });\n          } else {\n            router.push({ name: routeNames.profile.billing });\n          }\n        }\n      });\n\n    return {\n      valid,\n      formData,\n      errors,\n      login,\n      icons: {\n        mdiEyeOffOutline,\n        mdiEyeOutline,\n      },\n      isPasswordVisible,\n      routeNames,\n      loading,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LoginForm.vue?vue&type=template&id=17cd3a56&\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=ts&\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VForm,VTextField})\n","\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent } from '@/plugins/composition';\nimport LoginForm from './components/LoginForm.vue';\nimport { routeNames } from '@/router/routeNames';\nimport MemberPage from '@/layouts/MemberLayout/MemberPage.vue';\n\nexport default defineComponent({\n  components: { LoginForm, MemberPage },\n  name: 'LoginPage',\n  setup() {\n    return {\n      routeNames,\n    };\n  },\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LoginPage.vue?vue&type=template&id=cc507696&\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=ts&\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { AxiosError } from 'axios';\nimport { camel } from '@/utils/string';\nimport { ref, watch } from '@/plugins/composition';\n\ntype ErrorObject = {\n  [key: string]: string[];\n};\n\ntype FormData = {\n  [key: string]: unknown;\n};\n\n// type ErrorResponse = {\n//   [key: string]: unknown;\n// };\n\ntype ErrorsObject<T> = {\n  [K in keyof T]: T[K];\n};\n\nexport const useFormValidation = <T extends FormData>(formData: T) => {\n  const valid = ref(false);\n\n  const buildObject = () => {\n    const obj = {} as ErrorObject;\n    for (const [key] of Object.entries(formData)) {\n      obj[key] = [];\n    }\n    return obj;\n  };\n\n  const errors = ref<ErrorsObject<T>>(buildObject() as T);\n\n  const resetErrors = () => {\n    errors.value = buildObject();\n  };\n\n  const mapErrors = (error: AxiosError) => {\n    if (error.response?.status === 422) {\n      for (const [key, value] of Object.entries(error.response.data.errors)) {\n        errors.value[camel(key)].push(...(value as string[]));\n      }\n    } else {\n      throw new Error(error.message);\n    }\n  };\n\n  watch(formData, () => resetErrors());\n\n  return {\n    errors,\n    mapErrors,\n    valid,\n  };\n};\n"],"sourceRoot":""}