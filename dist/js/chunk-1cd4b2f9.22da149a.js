(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cd4b2f9"],{"43c6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("member-page",{attrs:{heading:"Secure Payment","show-title":!1}},[e.total>0?r("div",{staticClass:"mb-4"},[e._v(" Once payment is complete you will receive a booking confirmation and receipt via email. ")]):e._e(),e.total>0?r("div",{staticClass:"yellow-border pa-2"},[r("div",{staticClass:"font-weight-bold mb-2"},[e._v("Payment Summary")]),e._l(e.reservations,(function(t,n){return r("div",{key:t.uuid},[r("div",[e._v("Booking "+e._s(n+1))]),r("pending-reservation-list-item",{attrs:{reservation:t},on:{deleted:e.refresh}}),r("v-divider",{staticClass:"my-4"})],1)})),r("div",[r("strong",[e._v("Total:"+e._s(e.formatPrice(e.total)))])])],2):e._e(),0!==e.total||e.loading?e._e():r("div",{staticClass:"mt-4"},[r("div",{staticClass:"text-center"},[e._v("You have no pending reservations.")]),r("base-button",{staticClass:"mt-2",attrs:{to:{name:e.routeNames.spaces.book},black:"",block:""}},[e._v("Create a Booking")])],1),e.total>0?r("div",{staticClass:"mt-4"},[e.defaultPaymentMethod?r("div",{staticClass:"font-weight-bold"},[e._v(" Your default payment method ending in "+e._s(e.defaultPaymentMethod.card.last4)+" will be charged immediately. ")]):r("div",{staticClass:"font-weight-bold"},[e._v("You must add a payment method to finalise your bookings.")]),e.paymentError?r("div",{staticClass:"error--text"},[e._v(" "+e._s(e.paymentError)+". Please update your details and try again. If the problem persists, please "),r("router-link",{attrs:{to:{name:e.routeNames.contact}}},[e._v("contact us")]),e._v(". ")],1):e._e(),r("div",{staticClass:"d-md-flex my-4",class:e.defaultPaymentMethod?"flex-md-row-reverse":"d-flex"},[r("div",{staticClass:"d-flex justify-space-between mb-4"},[r("base-button",{staticClass:"mr-2",attrs:{loading:e.loading},on:{click:e.payByInvoice}},[e._v("Pay By Invoice")]),e.defaultPaymentMethod?r("base-button",{attrs:{black:"",loading:e.loading},on:{click:e.pay}},[e._v("Pay Now")]):e._e()],1),r("v-spacer"),r("div",[r("base-button",{attrs:{disabled:e.loading},on:{click:e.addPaymentMethod}},[e._v("Add Payment Method")])],1)],1),r("v-expand-transition",[e.addingPaymentMethod?r("payment-methods",{attrs:{"show-adding":""},on:{cancel:function(t){e.addingPaymentMethod=!1},input:e.methodAdded}}):e._e()],1)],1):e._e(),e.payment?r("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"text-h5 text-break"},[e._v(" Your booking is secured ")]),r("v-card-text",{staticClass:"black--text"},[r("div",[e._v(" Please check your email for confirmation records and your receipt. "),r("br"),r("br"),e._v(" If anything changes and you need to edit your booking, please log back in to your account. ")]),r("div",{staticClass:"my-4 pa-4 border-yellow"},[r("div",[e._v("Total Paid: "+e._s(e.formatPrice(e.payment.total)))]),r("div",{staticClass:"mt-2 font-weight-bold"},[e._v("Receipt #: "+e._s(e.payment.reference))])]),r("div",{staticClass:"mt-2"},[e._v("For any questions, contact us at bookings@brandx.org.au")])]),r("v-card-actions",[r("v-spacer"),r("base-button",{attrs:{black:""},on:{click:e.goToBookings}},[e._v("Go To Dashboard")])],1)],1)],1):e._e()],1)},a=[],i=r("1da1"),o=(r("96cf"),r("10d5")),s=r("7af9"),c=r("d570"),u=r("ab47"),d=r("8240"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-2"},[r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.reservation.resourceName))]),r("div",{staticClass:"my-1"},e._l(e.reservation.dates,(function(t,n){return r("strong",{key:n},[e._v(" "+e._s(e.formatTimeRange(t.start,t.end))+" ")])})),0),r("div",[r("strong",[r("span",{staticClass:"text-capitalize"},[e._v(e._s("performance"===e.reservation.useType?"event":e.reservation.useType))]),e._v(" Rate Applied:")]),e._v(" "+e._s(e.formatPrice(e.reservation.rate))+" ")]),r("div",[r("strong",[e._v("Total Hours:")]),e._v(" "+e._s(e.reservation.duration))]),r("div",{staticClass:"d-flex"},[r("div",[r("strong",[e._v("Amount Due:")]),e._v(" "+e._s(e.formatPrice(e.reservation.price)))]),r("v-spacer"),r("v-chip",{staticClass:"font-weight-bold",attrs:{label:"",small:"",color:"error"},on:{click:e.cancel}},[e._v("Delete")])],1)])},m=[],v=(r("a9e3"),r("bf72")),p=r("5eb3"),f=Object(d["c"])({name:"PendingReservationListItem",props:{reservation:{type:Object,required:!0},index:{type:Number,required:!1}},setup:function(e,t){var r=t.emit,n=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(o["a"])(),a=n.$delete,t.next=3,a("/reservations/".concat(e.reservation.uuid));case 3:r("deleted");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{formatPrice:v["a"],formatTimeRange:p["d"],cancel:n}}}),b=f,g=r("0c7c"),h=r("6544"),y=r.n(h),w=r("cc20"),_=r("2fa4"),x=Object(g["a"])(b,l,m,!1,null,null,null),j=x.exports;y()(x,{VChip:w["a"],VSpacer:_["a"]});var k=r("90ed"),O=r("0ed6"),R=r("7737"),C=r("b28c"),P=r("d7af"),T=r("3b95"),M=r("fb40"),B=Object(d["c"])({components:{MemberPage:u["a"],PendingReservationListItem:j,BaseButton:O["a"],PaymentMethods:M["a"]},name:"CheckoutPage",setup:function(){var e=Object(d["i"])([]),t=Object(d["i"])(0),r=Object(d["i"])(null),n=Object(d["i"])(null),a=Object(d["i"])(!1),u=Object(d["i"])(null),l=Object(d["i"])(!1),m=Object(o["a"])(),p=m.get,f=m.post,b=Object(s["a"])(),g=b.user,h=Object(R["a"])({initial:!0}),y=h.loading,w=h.withLoader,_=Object(C["a"])(),x=_.getDefaultPaymentMethod,j=Object(P["a"])(),O=j.router,M=Object(T["j"])(),B=M.confirmation,S=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w(Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p("/users/".concat(g.value.uuid,"/checkout/details"));case 2:return n=e.sent,e.next=5,x();case 5:r.value=e.sent,t.value=n.total;case 7:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",w(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])();case 2:e.value=t.sent;case 3:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.value.makePayment().catch((function(e){e.response.data.redirect?window.location.href=e.response.data.redirect:u.value=e.response.data.message})).then((function(e){e.total&&(a.value=!0,n.value=e)}));case 2:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){O.push({name:k["a"].my.bookings})},q=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return e.next=4,S();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(d["e"])(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return e.next=4,S();case 4:case"end":return e.stop()}}),e)}))));var A=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t='To request a booking and to pay by invoice, you will need to delete the booking you have just made and contact <a href="mailto:bookings@brandx.org.au">bookings@brandx.org.au</a> with your booking request (including location, date, time, billing name and address). <br><br> Please allow 48 hours for Brand X to confirm your request, which will be subject to availability at the time we answer your email.',e.next=3,B(t,{confirmTitle:"Are you sure?",confirmText:"Delete Bookings"});case 3:r=e.sent,r&&w(Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f("empty-cart",{});case 2:t=e.sent,t&&O.push({name:k["a"].my.bookings});case 4:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:l.value=!1;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){l.value=!0};return{reservations:e,total:t,routeNames:k["a"],formatPrice:v["a"],loading:y,pay:E,defaultPaymentMethod:r,payment:n,dialog:a,goToBookings:I,refresh:q,paymentError:u,payByInvoice:A,user:g,addingPaymentMethod:l,addPaymentMethod:N,methodAdded:D}}}),S=B,V=r("b0af"),E=r("99d9"),I=r("169a"),q=r("ce7e"),A=r("0789"),D=Object(g["a"])(S,n,a,!1,null,null,null);t["default"]=D.exports;y()(D,{VCard:V["a"],VCardActions:E["a"],VCardText:E["b"],VCardTitle:E["c"],VDialog:I["a"],VDivider:q["a"],VExpandTransition:A["a"],VSpacer:_["a"]})},"737d":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("fd3a"),a=r("fbb4"),i=r("8c86");function o(e,t){Object(i["a"])(1,arguments);var r=Object(n["a"])(e);if(isNaN(r.getTime()))throw new RangeError("Invalid time value");var o=null!==t&&void 0!==t&&t.format?String(t.format):"extended",s=null!==t&&void 0!==t&&t.representation?String(t.representation):"complete";if("extended"!==o&&"basic"!==o)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==s&&"time"!==s&&"complete"!==s)throw new RangeError("representation must be 'date', 'time', or 'complete'");var c="",u="",d="extended"===o?"-":"",l="extended"===o?":":"";if("time"!==s){var m=Object(a["a"])(r.getDate(),2),v=Object(a["a"])(r.getMonth()+1,2),p=Object(a["a"])(r.getFullYear(),4);c="".concat(p).concat(d).concat(v).concat(d).concat(m)}if("date"!==s){var f=r.getTimezoneOffset();if(0!==f){var b=Math.abs(f),g=Object(a["a"])(Math.floor(b/60),2),h=Object(a["a"])(b%60,2),y=f<0?"+":"-";u="".concat(y).concat(g,":").concat(h)}else u="Z";var w=Object(a["a"])(r.getHours(),2),_=Object(a["a"])(r.getMinutes(),2),x=Object(a["a"])(r.getSeconds(),2),j=""===c?"":"T",k=[w,_,x].join(l);c="".concat(c).concat(j).concat(k).concat(u)}return c}},"8ce9":function(e,t,r){},"9ae9":function(e,t,r){"use strict";r("db32")},ab47:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w-full"},[r("v-expand-transition",[e.showTitle?r("v-card-title",{staticClass:"bg-black text-yellow",class:e.titleClass},[e._v(e._s(e.title))]):e._e()],1),e._t("header"),r("v-sheet",{staticClass:"pa-2 mt-2 mx-auto",attrs:{"max-width":e.md?"1080px":"100%"}},[e.heading?r("div",{staticClass:"font-weight-bold text-h5 mb-2"},[e._v(e._s(e.heading))]):e._e(),e._t("default")],2)],2)},a=[],i=r("8240"),o=r("2c28"),s=r("90ed"),c=r("d7af"),u=Object(i["c"])({name:"MemberPage",props:{title:{type:String,default:""},heading:{type:String,default:null,required:!1},titleClass:{type:String,default:"",required:!1},showTitle:{type:Boolean,default:!0,required:!1}},setup:function(){var e=Object(o["useBreakpoints"])(o["breakpointsTailwind"]),t=e.md,r=Object(c["a"])(),n=r.route;return{md:t,routeNames:s["a"],route:n}}}),d=u,l=(r("9ae9"),r("0c7c")),m=r("6544"),v=r.n(m),p=r("99d9"),f=r("0789"),b=r("8dd9"),g=Object(l["a"])(d,n,a,!1,null,null,null);t["a"]=g.exports;v()(g,{VCardTitle:p["c"],VExpandTransition:f["a"],VSheet:b["a"]})},bf72:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return(e/100).toLocaleString("en-AU",{style:"currency",currency:"AUD"})}},ce7e:function(e,t,r){"use strict";var n=r("5530"),a=(r("8ce9"),r("7560"));t["a"]=a["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(e){var t;return this.$attrs.role&&"separator"!==this.$attrs.role||(t=this.vertical?"vertical":"horizontal"),e("hr",{class:Object(n["a"])({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:Object(n["a"])({role:"separator","aria-orientation":t},this.$attrs),on:this.$listeners})}})},d570:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return d}));var n=r("1da1"),a=(r("96cf"),r("a4d3"),r("e01a"),r("d3b7"),r("737d")),i=r("10d5"),o=r("7af9"),s=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=Object(i["a"])(),s=o.post,e.next=3,s("/reservations",{start:t.start,end:t.end,user:r,resource:n,attendees:t.attendees,generatingIncome:t.income,funded:t.funding,performance:t.performance,description:t.description,resource_name:a}).catch((function(e){return Promise.reject(e)}));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),c=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n,o){var s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=Object(i["a"])(),c=s.post,e.next=3,c("/reservations",{start:Object(a["a"])(t.start),end:Object(a["a"])(t.end),user:r,resource:n,attendees:t.attendees,generatingIncome:t.income,funded:t.funding,performance:t.performance,description:t.description,start_time:t.start_time,end_time:t.end_time,interval_type:t.interval_type,interval:t.interval,weekly_days:t.weekly_days,resource_name:o}).catch((function(e){return Promise.reject(e)}));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(i["a"])(),r=t.get,n=Object(o["a"])(),a=n.user,e.next=4,r("/users/".concat(a.value.uuid,"/pending-reservations"));case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(i["a"])(),r=t.get,e.next=3,r("/booked/reservations");case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},db32:function(e,t,r){},fbb4:function(e,t,r){"use strict";function n(e,t){var r=e<0?"-":"",n=Math.abs(e).toString();while(n.length<t)n="0"+n;return r+n}r.d(t,"a",(function(){return n}))}}]);
//# sourceMappingURL=chunk-1cd4b2f9.22da149a.js.map