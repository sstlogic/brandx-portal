{"version":3,"sources":["webpack:///./src/views/Password/ResetPasswordPage.vue?fb7b","webpack:///./src/views/Password/ResetPasswordPage.vue","webpack:///./src/views/Password/ResetPasswordPage.vue?47c9","webpack:///./src/views/Password/ResetPasswordPage.vue?2c30","webpack:///./src/composables/useLoader/useLoader.ts","webpack:///./src/composables/useValidation/useValidation.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","success","_v","staticClass","name","routeNames","auth","login","_e","model","value","callback","$$v","valid","expression","rules","required","errors","email","formData","$set","isPasswordVisible","icons","mdiEyeOffOutline","mdiEyeOutline","password","minLength","on","$event","loading","staticRenderFns","components","MemberPage","BaseButton","props","token","type","String","setup","useLoader","withLoader","useApi","post","useRouter","router","useStatus","setMessage","mapErrors","catch","error","reset","mdi","component","VForm","VSpacer","VTextField","config","initial","Promise","resolve","setTimeout","result","delay","buildObject","obj","Object","entries","key","resetErrors","response","status","Error","message","data","push"],"mappings":"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","file":"js/chunk-2c1686e6.e1c87da4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('member-page',{attrs:{\"title\":\"Reset Password\"}},[(!_vm.success)?_c('p',{staticClass:\"mb-2\"},[_vm._v(\"Reset your password below.\")]):_c('div',[_c('p',[_vm._v(\"Your password has been reset.\")]),_c('base-button',{staticClass:\"mt-2\",attrs:{\"to\":{ name: _vm.routeNames.auth.login },\"black\":\"\",\"block\":\"\"}},[_vm._v(\"Login\")])],1),_c('div',[(!_vm.success)?_c('v-form',{model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"outlined\":\"\",\"label\":\"Email\",\"rules\":[_vm.rules.required],\"disabled\":\"\",\"error-messages\":_vm.errors.email,\"dense\":\"\"},model:{value:(_vm.formData.email),callback:function ($$v) {_vm.$set(_vm.formData, \"email\", $$v)},expression:\"formData.email\"}}),_c('v-text-field',{attrs:{\"outlined\":\"\",\"type\":_vm.isPasswordVisible ? 'text' : 'password',\"label\":\"Password\",\"append-icon\":_vm.isPasswordVisible ? _vm.icons.mdiEyeOffOutline : _vm.icons.mdiEyeOutline,\"error-messages\":_vm.errors.password,\"rules\":[_vm.rules.required, _vm.rules.minLength(8)],\"dense\":\"\"},on:{\"click:append\":function($event){_vm.isPasswordVisible = !_vm.isPasswordVisible}},model:{value:(_vm.formData.password),callback:function ($$v) {_vm.$set(_vm.formData, \"password\", $$v)},expression:\"formData.password\"}}),_c('div',{staticClass:\"d-flex align-center justify-space-between flex-wrap\"},[_c('v-spacer')],1),_c('base-button',{attrs:{\"black\":\"\",\"block\":\"\",\"loading\":_vm.loading,\"disabled\":!_vm.valid},on:{\"click\":_vm.login}},[_vm._v(\"Reset Password\")])],1):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { useApi } from '@/composables/useApi';\nimport { useLoader } from '@/composables/useLoader';\nimport { useFormValidation } from '@/composables/useValidation';\nimport MemberPage from '@/layouts/MemberLayout/MemberPage.vue';\nimport { defineComponent, reactive, ref } from '@/plugins/composition';\nimport { useRouter } from '@/router/useRouter';\nimport { rules } from '@/composables/useValidation/validations';\nimport { mdiEyeOutline } from '@mdi/js';\nimport BaseButton from '@/components/base/BaseButton.vue';\nimport { routeNames } from '@/router/routeNames';\nimport { useStatus } from '@/composables/useStatus';\n\nexport default defineComponent({\n  components: { MemberPage, BaseButton },\n  name: 'ResetPasswordPage',\n  props: {\n    token: {\n      type: String,\n      required: true,\n    },\n    email: {\n      type: String,\n      required: true,\n    },\n  },\n  setup(props) {\n    const success = ref(false);\n    const valid = ref(false);\n    const isPasswordVisible = ref(false);\n    const { loading, withLoader } = useLoader();\n    const { post } = useApi();\n    const { router } = useRouter();\n    const { setMessage } = useStatus();\n\n    const formData = reactive({\n      password: '',\n      email: props.email,\n    });\n\n    const { errors, mapErrors } = useFormValidation(formData);\n\n    const login = async () =>\n      withLoader(async () => {\n        loading.value = true;\n        const reset = await post('/reset-password', {\n          email: formData.email,\n          password: formData.password,\n          token: props.token,\n        }).catch((error) => {\n          mapErrors(error);\n        });\n\n        if (reset) {\n          success.value = true;\n        }\n      });\n\n    return {\n      success,\n      valid,\n      isPasswordVisible,\n      login,\n      loading,\n      formData,\n      errors,\n      rules,\n      icons: {\n        mdiEyeOutline,\n      },\n      routeNames,\n    };\n  },\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ResetPasswordPage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ResetPasswordPage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ResetPasswordPage.vue?vue&type=template&id=5cd60ef3&\"\nimport script from \"./ResetPasswordPage.vue?vue&type=script&lang=ts&\"\nexport * from \"./ResetPasswordPage.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VForm,VSpacer,VTextField})\n","import { ref } from '@/plugins/composition';\n\ntype UseLoaderConfig = { delay?: number; initial?: boolean };\n\nexport const useLoader = (config?: UseLoaderConfig) => {\n  const loading = ref(config?.initial ?? false);\n\n  const withLoader = async (callback: () => unknown) => {\n    loading.value = true;\n\n    return new Promise((resolve) => {\n      setTimeout(async () => {\n        let result;\n\n        try {\n          result = await callback();\n        } catch (e) {\n          loading.value = false;\n        }\n\n        loading.value = false;\n        resolve(result);\n      }, config?.delay ?? 0);\n    });\n  };\n\n  return { loading, withLoader };\n};\n","import { AxiosError } from 'axios';\nimport { camel } from '@/utils/string';\nimport { ref, watch } from '@/plugins/composition';\n\ntype ErrorObject = {\n  [key: string]: string[];\n};\n\ntype FormData = {\n  [key: string]: unknown;\n};\n\n// type ErrorResponse = {\n//   [key: string]: unknown;\n// };\n\ntype ErrorsObject<T> = {\n  [K in keyof T]: T[K];\n};\n\nexport const useFormValidation = <T extends FormData>(formData: T) => {\n  const valid = ref(false);\n\n  const buildObject = () => {\n    const obj = {} as ErrorObject;\n    for (const [key] of Object.entries(formData)) {\n      obj[key] = [];\n    }\n    return obj;\n  };\n\n  const errors = ref<ErrorsObject<T>>(buildObject() as T);\n\n  const resetErrors = () => {\n    errors.value = buildObject();\n  };\n\n  const mapErrors = (error: AxiosError) => {\n    if (error.response?.status === 422) {\n      for (const [key, value] of Object.entries(error.response.data.errors)) {\n        errors.value[camel(key)].push(...(value as string[]));\n      }\n    } else {\n      throw new Error(error.message);\n    }\n  };\n\n  watch(formData, () => resetErrors());\n\n  return {\n    errors,\n    mapErrors,\n    valid,\n  };\n};\n"],"sourceRoot":""}